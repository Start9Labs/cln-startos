id: c-lightning
version: 23.02.2.8
title: Core Lightning
license: BSD-MIT
wrapper-repo: https://github.com/Start9Labs/c-lightning-wrapper
upstream-repo: https://github.com/ElementsProject/lightning
support-site: https://github.com/ElementsProject/lightning/issues
marketing-site: https://blockstream.com/lightning
release-notes: |-
  * Expose UI with authentication
  * Replace HTTP plugin with Sparko
  * Add The Eye of Satoshi watchtower server and client plugin
build: ["make"]
description:
  short: "An implementation of the Lightning Network protocol by Blockstream."
  long: "Core Lightning (CLN) (formerly c-lightning) is a lightweight, highly customizable, and standards compliant implementation of the Lightning Network protocol. It is optimized for performance and extensibility."
assets:
  license: LICENSE
  icon: icon.png
  instructions: instructions.md
main:
  type: docker
  image: main
  entrypoint: "docker_entrypoint.sh"
  args: []
  mounts:
    main: /root/.lightning
    cert: /mnt/cert
  shm-size-mb: 64
health-checks:
  rpc:
    name: RPC
    success-message: RPC server is alive and listening for commands
    type: docker
    image: main
    system: false
    entrypoint: check-rpc.sh
    args: []
    mounts: {}
    io-format: json
    inject: true
  web-ui:
    name: Web UI
    success-message: The Web-UI is ready to be visited in your browser.
    type: docker
    image: main
    entrypoint: check-web-ui.sh
    args: []
    io-format: json
    inject: true
  synced:
    name: Synced
    success-message: Synced to chain and ready to perform on-chain operations
    type: docker
    image: main
    system: false
    entrypoint: check-synced.sh
    args: []
    mounts: {}
    io-format: yaml
    inject: true
config:
  get:
    type: script
  set:
    type: script
properties:
  type: script
volumes:
  main:
    type: data
  cert:
    type: certificate
    interface-id: rest
alerts:
  install: |
    READ CAREFULLY! Core Lightning and the Lightning Network are considered beta software. Please use with caution and do not
    risk more money than you are willing to lose. We encourage frequent backups. If for any reason, you need to restore
    c-lightning from a backup, your on-chain wallet will be restored, but the money locked up in your channels will be
    stuck in those channels for an indeterminate period of time, if they are returned to you at all. It depends on the
    cooperation of your peers. Choose peers with discretion.
  uninstall: |
    READ CAREFULLY! Uninstalling Core Lightning will result in permanent loss of data, including its private keys for its
    on-chain wallet and all channel states. Please make a backup if you have any funds in your on-chain wallet or in any
    channels. Recovering from backup will restore your on-chain wallet, but due to the architecture of the Lightning
    Network, your channels cannot be recovered. All your channel funds will be stuck in those channels for an indeterminate
    period of time, and if your peers do not cooperate, they will not be recoverable at all.
  restore: |
    Restoring Core Lightning will overwrite its current data, including its on-chain wallet and channels. Any channels opened
    since the last backup will be forgotten and may linger indefinitely, and channels contained in the backup will be
    closed and their funds returned to your wallet, assuming your peers choose to cooperate.
interfaces:
  rpc:
    name: RPC Interface
    description: Listens for JSON-RPC commands over HTTP.
    tor-config:
      port-mapping:
        8080: "8080"
    lan-config:
      8080:
        ssl: false
        internal: 8080
    ui: false
    protocols:
      - tcp
      - http
      - json-rpc
  web-ui:
    name: Web User Interface
    description: A web user interface for CLN
    tor-config:
      port-mapping:
        80: "4500"
    lan-config:
      443:
        ssl: true
        internal: 4500
    ui: true
    protocols:
      - tcp
      - http
  peer:
    name: Peer Interface
    description: Listens for incoming connections from lightning peers.
    tor-config:
      port-mapping:
        9735: "9735"
    ui: false
    protocols:
      - tcp
      - lightning
  rest:
    name: C-Lightning-REST API
    description: C-Lightning-REST is a plugin for Core Lightning written by the RTL team that exposes an LND-like REST API for C-Lightning.
    tor-config:
      port-mapping:
        3001: "3001"
    lan-config:
      3001:
        ssl: true
        internal: 3001
    ui: false
    protocols:
      - tcp
      - http
  watchtower:
    name: TEOS Watchtower API
    description: The Eye of Satoshi is a Lightning watchtower compliant with BOLT13, written in Rust.
    tor-config:
      port-mapping:
        9814: "9814"
    lan-config:
      9814:
        ssl: true
        internal: 9814
    ui: false
    protocols:
      - tcp
      - http
  sparko:
    name: Sparko API
    description: The famous Spark wallet repackaged as a single-binary lightningd plugin. This works either as a full-blown HTTP-RPC bridge to your node that can be used to develop apps.
    tor-config:
      port-mapping:
        9737: "9737"
    lan-config:
      9737:
        ssl: true
        internal: 9737
    ui: false
    protocols:
      - tcp
      - http
dependencies:
  bitcoind:
    version: ">=0.21.1.2 <27.0.0"
    requirement:
      type: required
    description: Used as a blockchain backend.
    config:
      check:
        type: script
      auto-configure:
        type: script
backup:
  create:
    type: docker
    image: compat
    system: true
    entrypoint: compat
    args:
      - duplicity
      - create
      - /mnt/backup
      - /root/.lightning
    mounts:
      BACKUP: /mnt/backup
      main: /root/.lightning
  restore:
    type: docker
    image: compat
    system: true
    entrypoint: compat
    args:
      - duplicity
      - restore
      - /mnt/backup
      - /root/.lightning
    mounts:
      BACKUP: /mnt/backup
      main: /root/.lightning
migrations:
  from:
    "*":
      type: script
      args: ["from"]
  to:
    "*":
      type: script
      args: ["to"]
# actions:
#   rescan-blockchain:
#     name: "Rescan Blockchain"
#     description: "Rescan the blockchain from a specified height or depth. If rescanning from a specific blockheight, enter a negative number i.e. '-600000' to rescan from block 600,000 to the tip. Alternatively, you can enter a positive number as the depth i.e. '10000' to rescan the last 10,000 blocks from the tip"
#     allowed-statuses:
#       - running
#     implementation:
#       type: docker
#       image: main
#       system: false
#       entrypoint: rescan-blockchain.sh
#       args: []
#       io-format: json
#       mounts:
#         main: /root/.lightning
#     input-spec:
#       blockheight-or-depth:
#         type: string
#         name: Depth (or Blockheight if prefixed with a hyphen)
#         description: Depth expressed as a positive number or blockheight prefixed with a hyphen.
#         masked: false
#         placeholder: "-600000"
#         nullable: false